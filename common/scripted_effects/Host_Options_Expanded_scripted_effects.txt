# Host Options Expanded scripted effects
# Splits initial country array up in 5 separate arrays

sort_array_by_factions = {
	clear_array = global.chinese_countries_array
	clear_array = global.democratic_countries_array
	clear_array = global.communist_countries_array
	clear_array = global.fascist_countries_array
	clear_array = global.neutral_countries_array
	for_each_scope_loop = {
		array = global.playerbase

		This = {
			if = {
				limit = { is_ching_chong = yes }

				#Add chinese country to array
				add_to_array = { global.chinese_countries_array = This.id }
			}
			#If government is democratic
			else_if = {
				limit = { is_allied_with_allies = yes }

				#Add democratic country to array
				add_to_array = { global.democratic_countries_array = This.id }
			}
			# If government is gommie
			else_if = {
				limit = { is_allied_with_comintern = yes }

				#Add gommie country to array
				add_to_array = { global.communist_countries_array = This.id }
			}
			# If government is nezi
			else_if = {
				limit = { is_allied_with_axis = yes }

				#Add fascist country to array
				add_to_array = { global.fascist_countries_array = This.id }
			}
			# If government is neutral
			else = {
				limit = { has_government = neutrality }

				#Add neutral country to array
				add_to_array = { global.neutral_countries_array = This.id }
			}
			log = "[?This.GetName]"
		}
		clear_variable = array_country
	}
}

add_player_countries = {
	every_country = {
		limit = { is_ai = no }
		add_to_array = { global.playerbase = THIS.id }
	}
	sort_array_by_factions = yes
}
