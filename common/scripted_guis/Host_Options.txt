scripted_gui = {

	host_options_expanded = {
		context_type = player_context

		window_name = "host_container"

		visible = { ROOT = { TAG = global_event_target:game_host } }

		effects = {
			host_options_icon_click = {
				set_temp_variable = { show = 1 }
				subtract_from_temp_variable = { show = show_host_options }
				set_variable = { show_host_options = show }
				set_variable = { show_player_options = 0 }
				set_variable = { show_switch_options = 0 }
			}
		}
	}

	host_options_expanded_options = {
		context_type = player_context

		window_name = "host_options_container"

		visible = {
			ROOT = { TAG = global_event_target:game_host }
			check_variable = { show_host_options > 0.0 }
		}

		effects = {
			close_button_click = {
				set_variable = { show_host_options = 0 }
				set_variable = { show_player_options = 0 }
				set_variable = { show_switch_options = 0 }
			}

			player_flag_click = {
				capital_scope = {
					ROOT = {
						goto_state = PREV
					}
				}
				save_global_event_target_as = selected_player
				event_target:game_host = {
					set_temp_variable = { show = 1 }
					subtract_from_temp_variable = { show = show_player_options }
					set_variable = { show_player_options = show }
				}
			}

			general_option_1_click = { add_threat = 1 }
			general_option_2_click = { add_threat = 5 }
			general_option_3_click = { add_threat = -1 }
			general_option_4_click = { add_threat = -5 }

			host_flag_click = {
				event_target:game_host = {
					capital_scope = {
						ROOT = {
							goto_state = PREV
						}
					}
				}
			}
		}

		dynamic_lists = {
			chinese_countries_player_list_gridbox = {
				array = global.chinese_countries_array
				entry_container = chinese_countries_player_list_entry
				change_scope = yes
			}
			democratic_player_list_gridbox = {
				array = global.democratic_countries_array
				entry_container = democratic_player_list_entry
				change_scope = yes
			}
			communist_player_list_gridbox = {
				array = global.communist_countries_array
				entry_container = communism_player_list_entry
				change_scope = yes
			}
			fascism_player_list_gridbox = {
				array = global.fascist_countries_array
				entry_container = fascism_player_list_entry
				change_scope = yes
			}
			neutral_player_list_gridbox = {
				array = global.neutral_countries_array
				entry_container = neutral_player_list_entry
				change_scope = yes
			}
		}

		properties = {
			host_flag = {
				image = "[game_host.GetFlag]"
			}
			player_flag = {
				image = "[This.GetFlag]"
			}
		}
	}

	player_options_expanded = {
		context_type = player_context

		window_name = "player_options_container"

		visible = {
			ROOT = { TAG = global_event_target:game_host }
			check_variable = { show_player_options > 0.0 }
		}

		effects = {
			player_flag_click = {
				#event_target:selected_player = { add_political_power = 5 }
			}
			option_1_click = {
				event_target:selected_player = {
					if = {
						limit = { has_country_flag = permission_given_for_ideology_switch }
						switch_country_to_ching_chong = yes
					}
					else_if = {
						limit = { NOT = { has_global_flag = permission_being_asked } }
						country_event = { id = player_permission.3 }
						event_target:game_host = { country_event = player_permission.1 }
					}
					else = {
						event_target:game_host = { country_event = player_permission.8 }
					}
				}
			}
			option_2_click = {
				event_target:selected_player = {
					if = {
						limit = { has_country_flag = permission_given_for_ideology_switch }
						switch_country_to_comintern = yes
					}
					else_if = {
						limit = { NOT = { has_global_flag = permission_being_asked } }
						country_event = { id = player_permission.3 }
						event_target:game_host = { country_event = player_permission.1 }
					}
					else = {
						event_target:game_host = { country_event = player_permission.8 }
					}
				}
			}
			option_3_click = {
				event_target:selected_player = {
					if = {
						limit = { has_country_flag = permission_given_for_ideology_switch }
						switch_country_to_allies = yes
					}
					else_if = {
						limit = { NOT = { has_global_flag = permission_being_asked } }
						country_event = { id = player_permission.3 }
						event_target:game_host = { country_event = player_permission.1 }
					}
					else = {
						event_target:game_host = { country_event = player_permission.8 }
					}
				}
			}
			option_4_click = {
				event_target:selected_player = {
					if = {
						limit = { has_country_flag = permission_given_for_ideology_switch }
						switch_country_to_axis = yes
					}
					else_if = {
						limit = { NOT = { has_global_flag = permission_being_asked } }
						country_event = { id = player_permission.3 }
						event_target:game_host = { country_event = player_permission.1 }
					}
					else = {
						event_target:game_host = { country_event = player_permission.8 }
					}
				}
			}
			option_5_click = {
				event_target:selected_player = {
					if = {
						limit = { has_country_flag = permission_given_for_ideology_switch }
						switch_country_to_neutral = yes
					}
					else_if = {
						limit = { NOT = { has_global_flag = permission_being_asked } }
						country_event = { id = player_permission.3 }
						event_target:game_host = { country_event = player_permission.1 }
					}
					else = {
						event_target:game_host = { country_event = player_permission.8 }
					}
				}
			}
			option_6_click = {
				event_target:selected_player = { save_global_event_target_as = country_to_switch }
			}
		}

		properties = {
			player_flag = { image = "[selected_player.GetFlag]" }
		}
	}

	country_switcher = {
		context_type = player_context

		window_name = "country_switcher_container"

		visible = {
			any_country = {
				OR = {
					TAG = event_target:country_to_switch
					TAG = event_target:country_to_switch_to
				}
			}
			ROOT = { TAG = global_event_target:game_host }
			check_variable = { show_host_options > 0.0 }
		}

		effects = {
			arrow_click = {
				if = {
					limit = {
						any_country = { TAG = event_target:country_to_switch }
						any_country = { TAG = event_target:country_to_switch_to }
					}
					event_target:game_host = { country_event = switching_countries.1 }
					event_target:country_to_switch = { country_event = switching_countries.1 }
				}
			}

			player_flag_selected_country_to_switch_to_right_click = {
				clear_global_event_target = country_to_switch_to
			}

			player_flag_selected_country_to_switch_to_click = {
				set_temp_variable = { show = 1 }
				subtract_from_temp_variable = { show = show_switch_options }
				set_variable = { show_switch_options = show }
			}
		}

		properties = {
			player_flag_selected_country_to_switch = { image = "[country_to_switch.GetFlag]" }
			player_flag_selected_country_to_switch_to = { image = "[country_to_switch_to.GetFlag]" }
		}
	}

	country_switcher = {
		context_type = player_context

		window_name = "country_switcher_country_to_switch_to_container"

		visible = {
			any_country = {
				OR = {
					TAG = event_target:country_to_switch
					TAG = event_target:country_to_switch_to
				}
			}
			ROOT = { TAG = global_event_target:game_host }
			check_variable = { show_switch_options > 0.0 }
		}

		effects = {
			player_flag_ai_click = {
				save_global_event_target_as = country_to_switch_to
				GER = { add_political_power = 5 }
			}
		}

		dynamic_lists = {
			ai_countries_list_gridbox = {
				array = global.aibase
				entry_container = ai_countries_list_entry
				change_scope = yes
			}
		}

		properties = {
			player_flag_ai = { image = "[THIS.GetFlag]" }
		}
	}
}
